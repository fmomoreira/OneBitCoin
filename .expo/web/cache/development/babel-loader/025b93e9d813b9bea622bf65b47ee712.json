{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/fmomoreira/Documentos/Onebitcode/OneBitCoin/src/components/CardCotacoes/index.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect, Fragment } from \"react\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport CotacaoDiaria from \"../CardCotacaoDiaria/index\";\nimport styles from \"./styles\";\n\nfunction addZero(number) {\n  if (number <= 9) {\n    return \"0\" + number;\n  }\n\n  return number;\n}\n\nfunction url(qtdDias) {\n  var date = new Date();\n  var listLastDays = qtdDias;\n  var end_date = date.getFullYear() + \"-\" + addZero(date.getMonth() + 1) + \"-\" + addZero(date.getDate());\n  date.setDate(date.getDate() - listLastDays);\n  var start_date = date.getFullYear() + \"-\" + addZero(date.getMonth() + 1) + \"-\" + addZero(date.getDate());\n  var urlSearchCoins = \"https://api.coindesk.com/v1/bpi/historical/close.json?start=\" + start_date + \"&end=\" + end_date;\n  return urlSearchCoins;\n}\n\nfunction getListCoins(url) {\n  var response, joao, dados, queryCoinsList, data;\n  return _regeneratorRuntime.async(function getListCoins$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(fetch(url));\n\n        case 2:\n          response = _context.sent;\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(response.json());\n\n        case 5:\n          joao = _context.sent;\n          console.log(\"funcionou\");\n          dados = joao.bpi;\n          queryCoinsList = Object.keys(dados).map(function (key) {\n            return {\n              data: key,\n              valor: dados[key]\n            };\n          });\n          data = queryCoinsList.reverse();\n          return _context.abrupt(\"return\", data);\n\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nexport default function CardCotacoes() {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      coinsList = _useState2[0],\n      setcoinsList = _useState2[1];\n\n  var _useState3 = useState(1),\n      _useState4 = _slicedToArray(_useState3, 2),\n      days = _useState4[0],\n      setdays = _useState4[1];\n\n  function e(number) {\n    setdays(number);\n  }\n\n  useEffect(function () {\n    getListCoins(url(days)).then(function (data) {\n      setcoinsList(data);\n    });\n  }, [days]);\n  return React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.filtro,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.x,\n    onPress: function onPress() {\n      return e(1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, \"1 day\"), React.createElement(Text, {\n    style: styles.x,\n    onPress: function onPress() {\n      return e(7);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, \"7 days\"), React.createElement(Text, {\n    style: styles.x,\n    onPress: function onPress() {\n      return e(30);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, \"1 month\"), React.createElement(Text, {\n    style: styles.x,\n    onPress: function onPress() {\n      return e(180);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, \"6 months\")), React.createElement(ScrollView, {\n    style: styles.headerCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: {\n      marginTop: 40\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, React.createElement(FlatList, {\n    data: coinsList,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(CotacaoDiaria, {\n        valor: item.valor,\n        data: item.data,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 22\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"sources":["/home/fmomoreira/Documentos/Onebitcode/OneBitCoin/src/components/CardCotacoes/index.js"],"names":["React","useState","useEffect","Fragment","CotacaoDiaria","styles","addZero","number","url","qtdDias","date","Date","listLastDays","end_date","getFullYear","getMonth","getDate","setDate","start_date","urlSearchCoins","getListCoins","fetch","response","json","joao","console","log","dados","bpi","queryCoinsList","Object","keys","map","key","data","valor","reverse","CardCotacoes","coinsList","setcoinsList","days","setdays","e","then","filtro","x","headerCard","marginTop","item"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,QAArC,QAAqD,OAArD;;;;;AAEA,OAAOC,aAAP;AACA,OAAOC,MAAP;;AAGA,SAASC,OAAT,CAAiBC,MAAjB,EAAyB;AACvB,MAAIA,MAAM,IAAI,CAAd,EAAiB;AACf,WAAO,MAAMA,MAAb;AACD;;AACD,SAAOA,MAAP;AACD;;AAGD,SAASC,GAAT,CAAaC,OAAb,EAAsB;AACpB,MAAMC,IAAI,GAAG,IAAIC,IAAJ,EAAb;AACA,MAAMC,YAAY,GAAGH,OAArB;AACA,MAAMI,QAAQ,GAAMH,IAAI,CAACI,WAAL,EAAN,SAA4BR,OAAO,CAC/CI,IAAI,CAACK,QAAL,KAAkB,CAD6B,CAAnC,SAETT,OAAO,CAACI,IAAI,CAACM,OAAL,EAAD,CAFZ;AAGAN,EAAAA,IAAI,CAACO,OAAL,CAAaP,IAAI,CAACM,OAAL,KAAiBJ,YAA9B;AACA,MAAMM,UAAU,GAAMR,IAAI,CAACI,WAAL,EAAN,SAA4BR,OAAO,CACjDI,IAAI,CAACK,QAAL,KAAkB,CAD+B,CAAnC,SAEXT,OAAO,CAACI,IAAI,CAACM,OAAL,EAAD,CAFZ;AAKA,MAAMG,cAAc,oEAAkED,UAAlE,aAAoFL,QAAxG;AACA,SAAOM,cAAP;AACD;;AAED,SAAeC,YAAf,CAA4BZ,GAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACuBa,KAAK,CAACb,GAAD,CAD5B;;AAAA;AACMc,UAAAA,QADN;AAAA;AAAA,2CAEmBA,QAAQ,CAACC,IAAT,EAFnB;;AAAA;AAEMC,UAAAA,IAFN;AAGEC,UAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACIC,UAAAA,KAJN,GAIcH,IAAI,CAACI,GAJnB;AAKQC,UAAAA,cALR,GAKyBC,MAAM,CAACC,IAAP,CAAYJ,KAAZ,EAAmBK,GAAnB,CAAuB,UAACC,GAAD,EAAS;AACrD,mBAAO;AACLC,cAAAA,IAAI,EAAED,GADD;AAELE,cAAAA,KAAK,EAAER,KAAK,CAACM,GAAD;AAFP,aAAP;AAID,WALsB,CALzB;AAWMC,UAAAA,IAXN,GAWaL,cAAc,CAACO,OAAf,EAXb;AAAA,2CAYSF,IAZT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAeA,eAAe,SAASG,YAAT,GAAwB;AAAA;;AAAA,kBACHpC,QAAQ,CAAC,EAAD,CADL;AAAA;AAAA,MAC9BqC,SAD8B;AAAA,MACnBC,YADmB;;AAAA,mBAEbtC,QAAQ,CAAC,CAAD,CAFK;AAAA;AAAA,MAE9BuC,IAF8B;AAAA,MAExBC,OAFwB;;AAIrC,WAASC,CAAT,CAAWnC,MAAX,EAAmB;AACjBkC,IAAAA,OAAO,CAAClC,MAAD,CAAP;AACD;;AAEDL,EAAAA,SAAS,CAAC,YAAM;AACdkB,IAAAA,YAAY,CAACZ,GAAG,CAACgC,IAAD,CAAJ,CAAZ,CAAwBG,IAAxB,CAA6B,UAACT,IAAD,EAAU;AACrCK,MAAAA,YAAY,CAACL,IAAD,CAAZ;AACD,KAFD;AAGD,GAJQ,EAIN,CAACM,IAAD,CAJM,CAAT;AAMA,SACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEnC,MAAM,CAACuC,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEvC,MAAM,CAACwC,CAApB;AAAuB,IAAA,OAAO,EAAE;AAAA,aAAMH,CAAC,CAAC,CAAD,CAAP;AAAA,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAIE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAErC,MAAM,CAACwC,CAApB;AAAuB,IAAA,OAAO,EAAE;AAAA,aAAMH,CAAC,CAAC,CAAD,CAAP;AAAA,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,EAOE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAErC,MAAM,CAACwC,CAApB;AAAuB,IAAA,OAAO,EAAE;AAAA,aAAMH,CAAC,CAAC,EAAD,CAAP;AAAA,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAPF,EAUE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAErC,MAAM,CAACwC,CAApB;AAAuB,IAAA,OAAO,EAAE;AAAA,aAAMH,CAAC,CAAC,GAAD,CAAP;AAAA,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVF,CADF,EAeE,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAErC,MAAM,CAACyC,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,QAAD;AACE,IAAA,IAAI,EAAET,SADR;AAEE,IAAA,UAAU,EAAE,0BAAc;AAAA,UAAXU,IAAW,QAAXA,IAAW;AACxB,aAAO,oBAAC,aAAD;AAAe,QAAA,KAAK,EAAEA,IAAI,CAACb,KAA3B;AAAkC,QAAA,IAAI,EAAEa,IAAI,CAACd,IAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CAfF,CADF;AA4BD","sourcesContent":["import React, { useState, useEffect, Fragment } from \"react\";\nimport { ScrollView, View, FlatList, Text } from \"react-native\";\nimport CotacaoDiaria from \"../CardCotacaoDiaria/index\";\nimport styles from \"./styles\";\n\n//insert zero to the left\nfunction addZero(number) {\n  if (number <= 9) {\n    return \"0\" + number;\n  }\n  return number;\n}\n\n//Date formatting to get API\nfunction url(qtdDias) {\n  const date = new Date();\n  const listLastDays = qtdDias;\n  const end_date = `${date.getFullYear()}-${addZero(\n    date.getMonth() + 1\n  )}-${addZero(date.getDate())}`;\n  date.setDate(date.getDate() - listLastDays);\n  const start_date = `${date.getFullYear()}-${addZero(\n    date.getMonth() + 1\n  )}-${addZero(date.getDate())}`;\n\n  //URL  GET API\n  const urlSearchCoins = `https://api.coindesk.com/v1/bpi/historical/close.json?start=${start_date}&end=${end_date}`;\n  return urlSearchCoins;\n}\n\nasync function getListCoins(url) {\n  let response = await fetch(url);\n  let joao = await response.json();\n  console.log(\"funcionou\");\n  let dados = joao.bpi;\n  const queryCoinsList = Object.keys(dados).map((key) => {\n    return {\n      data: key,\n      valor: dados[key],\n    };\n  });\n  let data = queryCoinsList.reverse();\n  return data;\n}\n\nexport default function CardCotacoes() {\n  const [coinsList, setcoinsList] = useState([]);\n  const [days, setdays] = useState(1);\n\n  function e(number) {\n    setdays(number);\n  }\n\n  useEffect(() => {\n    getListCoins(url(days)).then((data) => {\n      setcoinsList(data);\n    });\n  }, [days]);\n\n  return (\n    <Fragment>\n      <View style={styles.filtro}>\n        <Text style={styles.x} onPress={() => e(1)}>\n          1 day\n        </Text>\n        <Text style={styles.x} onPress={() => e(7)}>\n          7 days\n        </Text>\n        <Text style={styles.x} onPress={() => e(30)}>\n          1 month\n        </Text>\n        <Text style={styles.x} onPress={() => e(180)}>\n          6 months\n        </Text>\n      </View>\n      <ScrollView style={styles.headerCard}>\n        <View style={{ marginTop: 40 }}>\n          <FlatList\n            data={coinsList}\n            renderItem={({ item }) => {\n              return <CotacaoDiaria valor={item.valor} data={item.data} />;\n            }}\n          />\n        </View>\n      </ScrollView>\n    </Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}